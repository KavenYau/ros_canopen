canopen_chain:
  ros__parameters:

    # reset_errors_before_recover: true

    update_ms: 10 # update interval of control loop, also controls sync interval if used

    bus:
      device: 'can0' # socketcan network
      loopback: false # socket should loop back messages
      driver_plugin: 'socketcan_interface/SocketCANInterface'
      master_allocator: 'canopen_master/SimpleMasterAllocator'

    sync:
      use_sync: false
      overflow: 10 # overflow sync counter at value or do not set it (0, default)
      interval_ms: 10 # update interval when using sync

    heartbeat:
      msg: "708#05" # message to send, cansend format: heartbeat of node 4 (704) with status 5=Started
      rate: 10.0
      use_heartbeat: true

    defaults:
      eds_pkg: 'canopen_chain_node' # optional package  name for relative path
      eds_file: 'test/config/phyPS409Y.eds' # path to EDS/DCF file

    # TODO(sam): figure out how to do this with "dynamicly nested" values
    canopen_nodes: ['node_1', 'rear_left_motor']

    node_1:
      id: 5
      profiles: ['io']
      eds_pkg: 'canopen_chain_node' # optional package  name for relative path
      # eds_file: 'test/config/phyPS409Y.eds' # path to EDS/DCF file
      # publish: ["obj:6040", "obj:6041", "obj:6061!", "obj:6064"] # list of objects to be published (one topic per node)
      io:
        digital_input_names: ['joystick_down', 'joystick_right', 'joystick_up', 'joystick_left']
        digital_output_names: ['everyting_is_fine_lamp', '', '', '', '', '', '', '', '', '', '', '', '', '', '','', 'relay_0', 'relay_1', 'relay_2', 'reset_emcy_stop']

    rear_left_motor:
      id: 2 
      eds_pkg: 'canopen_chain_node' # optional package  name for relative path
      eds_file: 'test/config/iPOS.dcf' # path to EDS/DCF file